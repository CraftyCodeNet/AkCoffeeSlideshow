// Generated by CoffeeScript 1.6.3
(function() {
  window.AkCoffeeSlideshow = (function() {
    AkCoffeeSlideshow.currentSlide;

    function AkCoffeeSlideshow(selector, options) {
      var $nextButton, $prevButton, i, slide, _i, _len, _ref,
        _this = this;
      if (selector == null) {
        selector = "";
      }
      this.options = options != null ? options : {};
      this.$container = $(selector);
      this.slides = this.options.slides;
      this.autoplay = this.options.autoplay;
      this.$container.addClass("akCoffeeSlideshow");
      this.$slidesContainerWrapper = $("<div class='slidesWrapper'>").appendTo(this.$container);
      this.$slidesContainer = $("<div class='slides'>").appendTo(this.$slidesContainerWrapper);
      $prevButton = $("<div class='prevButton'>").appendTo(this.$container);
      $nextButton = $("<div class='nextButton'>").appendTo(this.$container);
      _ref = this.options.slides;
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        slide = _ref[i];
        this.makeSlide(slide, i);
      }
      $prevButton.click(function() {
        _this.autoplay = false;
        return _this.navPrev();
      });
      $nextButton.click(function() {
        _this.autoplay = false;
        return _this.navNext();
      });
      if (this.options.animate) {
        switch (this.options.animate) {
          case "slideHorizontal":
            this.setupSlideHorizontalAnimation();
            break;
          case "slideVertical":
            this.setupSlideVerticalAnimation();
            break;
          case "fade":
            this.setupFadeAnimation();
        }
      }
      this.setOrientation();
      this.navTo(0);
      this.autoplayer();
    }

    AkCoffeeSlideshow.prototype.setOrientation = function() {
      if (this.options.orientation) {
        if (this.options.orientation === "vertical") {
          return this.$container.addClass("option-vertical");
        }
      }
    };

    AkCoffeeSlideshow.prototype.setupSlideHorizontalAnimation = function() {
      var arrangeSlidesHorizontally,
        _this = this;
      this.$container.addClass("option-slideHorizontal");
      arrangeSlidesHorizontally = function() {
        _this.slideWidth = _this.$slidesContainerWrapper.width();
        _this.$slidesContainer.find("> .slide").width(_this.slideWidth);
        return _this.$slidesContainer.width(_this.slides.length * _this.slideWidth);
      };
      arrangeSlidesHorizontally();
      return $(window).on("resize", arrangeSlidesHorizontally);
    };

    AkCoffeeSlideshow.prototype.setupSlideVerticalAnimation = function() {
      var arrangeSlidesVertically,
        _this = this;
      if (!this.options.orientation) {
        this.options.orientation = "vertical";
        this.setOrientation();
      }
      this.$container.addClass("option-slideVertical");
      arrangeSlidesVertically = function() {
        _this.slideHeight = _this.$slidesContainerWrapper.height();
        _this.$slidesContainer.find("> .slide").height(_this.slideHeight);
        return _this.$slidesContainer.height(_this.slides.length * _this.slideHeight);
      };
      arrangeSlidesVertically();
      return $(window).on("resize", arrangeSlidesVertically);
    };

    AkCoffeeSlideshow.prototype.setupFadeAnimation = function() {};

    AkCoffeeSlideshow.prototype.makeSlide = function(slide, i) {
      if (slide.image) {
        slide.html = $("<img src='" + slide.image + "'>");
        if (slide.imageWidth) {
          slide.html.attr("width", slide.imageWidth);
        }
        if (slide.imageHeight) {
          slide.html.attr("height", slide.imageHeight);
        }
      }
      if (slide.html) {
        return this.$slidesContainer.append($("<div class='slide' data-slide='" + i + "'>").html(slide.html));
      }
    };

    AkCoffeeSlideshow.prototype.lastSlide = function() {
      return this.slides.length - 1;
    };

    AkCoffeeSlideshow.prototype.navTo = function(slideIndex) {
      var $currentSlideEl, $nextSlideEl;
      this.currentSlide = slideIndex;
      $currentSlideEl = this.$slidesContainer.find("> .slide.active");
      $nextSlideEl = this.$slidesContainer.find("> .slide[data-slide='" + slideIndex + "']");
      if (this.options.animate) {
        if (this.options.animate === "fade") {
          $currentSlideEl.fadeOut(400);
          $nextSlideEl.fadeIn(400);
        } else if (this.options.animate === "slideHorizontal") {
          this.$slidesContainer.animate({
            "margin-left": this.slideWidth * -1 * slideIndex
          }, 400);
        } else if (this.options.animate === "slideVertical") {
          this.$slidesContainer.animate({
            "margin-top": this.slideHeight * -1 * slideIndex
          }, 400);
        }
      } else {
        $currentSlideEl.hide();
        $nextSlideEl.show();
      }
      $currentSlideEl.removeClass("active");
      $nextSlideEl.addClass("active");
      return this.$activeSlide = $nextSlideEl;
    };

    AkCoffeeSlideshow.prototype.navPrev = function() {
      if (this.currentSlide === 0) {
        return this.navTo(this.lastSlide());
      } else {
        return this.navTo(this.currentSlide - 1);
      }
    };

    AkCoffeeSlideshow.prototype.navNext = function() {
      if (this.currentSlide === this.lastSlide()) {
        return this.navTo(0);
      } else {
        return this.navTo(this.currentSlide + 1);
      }
    };

    AkCoffeeSlideshow.prototype.autoplayer = function() {
      var _this = this;
      return setTimeout(function() {
        if (_this.autoplay) {
          _this.navNext();
          return _this.autoplayer();
        }
      }, this.autoplay);
    };

    return AkCoffeeSlideshow;

  })();

}).call(this);
